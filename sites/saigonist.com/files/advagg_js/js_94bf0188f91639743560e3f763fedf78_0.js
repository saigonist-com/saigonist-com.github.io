/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/gmap.js. */
(function(){var handlers={},maps={},ajaxoffset=0;Drupal.gmap={getMap:function(mapid){if(maps[mapid]){return maps[mapid]}else{mapid=mapid.split('-').slice(1,-1).join('-');if(maps[mapid])return maps[mapid]};return false},unloadMap:function(mapid){delete maps[mapid]},addHandler:function(handler,callback){if(!handlers[handler])handlers[handler]=[];handlers[handler].push(callback)},globalChange:function(name,userdata){for(var mapid in Drupal.settings.gmap)if(Drupal.settings.gmap.hasOwnProperty(mapid))if(maps[mapid])maps[mapid].change(name,-1,userdata)},setup:function(settings){var obj=this,initcallback=function(mapid){return(function(){maps[mapid].change("bootstrap_options",-1);maps[mapid].change("boot",-1);maps[mapid].change("init",-1);maps[mapid].change("maptypechange",-1);maps[mapid].change("controltypechange",-1);maps[mapid].change("alignchange",-1);maps[mapid].ready=true;maps[mapid].change("ready",-1)})};if(settings||(Drupal.settings&&Drupal.settings.gmap)){var mapid=obj.id.split('-');if(Drupal.settings['gmap_remap_widgets'])if(Drupal.settings['gmap_remap_widgets'][obj.id]){jQuery.each(Drupal.settings['gmap_remap_widgets'][obj.id].classes,function(){jQuery(obj).addClass(this)});mapid=Drupal.settings['gmap_remap_widgets'][obj.id].id.split('-')};var instanceid=mapid.pop();mapid.shift();mapid=mapid.join('-');var control=instanceid.replace(/\d+$/,'');if(!maps[mapid]){if(settings){maps[mapid]=new Drupal.gmap.map(settings)}else maps[mapid]=new Drupal.gmap.map(Drupal.settings.gmap[mapid]);var callback=initcallback(mapid);setTimeout(callback,0)};if(handlers[control])for(var i=0;i<handlers[control].length;i++)handlers[control][i].call(maps[mapid],obj)}}};jQuery.fn.createGMap=function(settings,mapid){return this.each(function(){if(!mapid){mapid='auto'+ajaxoffset+'ajax';ajaxoffset++};settings.id=mapid;$(this).attr('id','gmap-'+mapid+'-gmap0').css('width',settings.width).css('height',settings.height).addClass('gmap-control').addClass('gmap-gmap').addClass('gmap').addClass('gmap-map').addClass('gmap-'+mapid+'-gmap').addClass('gmap-processed').each(function(){Drupal.gmap.setup.call(this,settings)})})}})();Drupal.gmap.factory={};Drupal.gmap.map=function(v){this.vars=v;this.map=undefined;this.ready=false;var _bindings={};this.bind=function(name,callback){if(!_bindings[name])_bindings[name]=[];return _bindings[name].push(callback)-1};this.change=function(name,id,userdata){var c;if(_bindings[name])for(c=0;c<_bindings[name].length;c++)if(c!==id)_bindings[name][c](userdata);if(name!=='all')this.change('all',-1,name,userdata)};this.deferChange=function(name,id,userdata){var obj=this;setTimeout(function(){obj.change(name,id,userdata)},0)};this.getMapTypeName=function(type){if(type=='map'||type=='roadmap')return'Map';if(type=='hybrid')return'Hybrid';if(type=='physical'||type=='terrain')return'Physical';if(type=='satellite')return'Satellite'};this.getMapTypeId=function(type){if(type=='Map'||type=='Roadmap')return google.maps.MapTypeId.ROADMAP;if(type=='Hybrid')return google.maps.MapTypeId.HYBRID;if(type=='Physical'||type=='Terrain')return google.maps.MapTypeId.TERRAIN;if(type=='Satellite')return google.maps.MapTypeId.SATELLITE}};Drupal.gmap.addHandler('gmap',function(elem){var obj=this,_ib={};_ib.zoom=obj.bind("zoom",function(){obj.map.setZoom(obj.vars.zoom)});_ib.move=obj.bind("move",function(){obj.map.panTo(new google.maps.LatLng(obj.vars.latitude,obj.vars.longitude))});_ib.width=obj.bind("widthchange",function(w){obj.map.getDiv().style.width=w;google.maps.event.trigger(obj.map)});_ib.height=obj.bind("heightchange",function(h){obj.map.getDiv().style.height=h;google.maps.event.trigger(obj.map)});_ib.ctc=obj.bind("controltypechange",function(){if(obj.vars.controltype==='Small'){obj.map.setOptions({navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}})}else if(obj.vars.controltype==='Large'){obj.map.setOptions({navigationControlOptions:{style:google.maps.NavigationControlStyle.ZOOM_PAN}})}else if(obj.vars.controltype==='Android')obj.map.setOptions({navigationControlOptions:{style:google.maps.NavigationControlStyle.ANDROID}})});_ib.mtc=obj.bind("maptypechange",function(){obj.map.setMapTypeId(obj.getMapTypeId(obj.vars.maptype))});obj.bind("bootstrap_options",function(){var opts={};obj.opts=opts;opts.disableDefaultUI=true;if(obj.vars.behavior.nodrag){opts.draggable=false}else if(obj.vars.behavior.nokeyboard)opts.keyboardShortcuts=false;switch(obj.vars.maptype){case'Hybrid':opts.mapTypeId=google.maps.MapTypeId.HYBRID;break;case'Physical':opts.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case'Satellite':opts.mapTypeId=google.maps.MapTypeId.SATELLITE;break;case'Map':default:opts.mapTypeId=google.maps.MapTypeId.ROADMAP;break};opts.mapTypeIds=[];if(obj.vars.baselayers.Map)opts.mapTypeIds.push(google.maps.MapTypeId.ROADMAP);if(obj.vars.baselayers.Hybrid)opts.mapTypeIds.push(google.maps.MapTypeId.HYBRID);if(obj.vars.baselayers.Physical)opts.mapTypeIds.push(google.maps.MapTypeId.TERRAIN);if(obj.vars.baselayers.Satellite)opts.mapTypeIds.push(google.maps.MapTypeId.SATELLITE);if(obj.vars.draggableCursor)opts.draggableCursor=obj.vars.draggableCursor;if(obj.vars.draggingCursor)opts.draggingCursor=obj.vars.draggingCursor;if(obj.vars.backgroundColor)opts.backgroundColor=obj.vars.backgroundColor;opts.mapTypeControl=true;opts.mapTypeControlOptions={};if(obj.vars.mtc==='standard'){opts.mapTypeControlOptions.style=google.maps.MapTypeControlStyle.DEFAULT}else if(obj.vars.mtc==='horiz'){opts.mapTypeControlOptions.style=google.maps.MapTypeControlStyle.HORIZONTAL_BAR}else if(obj.vars.mtc==='menu')opts.mapTypeControlOptions.style=google.maps.MapTypeControlStyle.DROPDOWN_MENU;if(obj.vars.controltype!=='None')opts.navigationControl=true;if(obj.vars.controltype==='Small'){opts.navigationControlOptions={style:google.maps.NavigationControlStyle.SMALL}}else if(obj.vars.controltype==='Large')opts.navigationControlOptions={style:google.maps.NavigationControlStyle.ZOOM_PAN};opts.scaleControl=obj.vars.behavior.scale;if(obj.vars.behavior.nomousezoom)opts.scrollwheel=false;if(obj.vars.behavior.nocontzoom)opts.disableDoubleClickZoom=true});obj.bind("boot",function(){obj.map=new google.maps.Map(elem,obj.opts)});obj.bind("init",function(){var map=obj.map;if(obj.vars.extent){var c=obj.vars.extent,extent=new google.maps.LatLngBounds(new google.maps.LatLng(c[0][0],c[0][1]),new google.maps.LatLng(c[1][0],c[1][1]));obj.vars.latitude=extent.getCenter().lat();obj.vars.longitude=extent.getCenter().lng();obj.vars.zoom=map.getBoundsZoomLevel(extent)};if(obj.vars.behavior.collapsehack)setTimeout(function(){var r=function(){google.maps.event.trigger(map);map.setCenter(new google.maps.LatLng(obj.vars.latitude,obj.vars.longitude),obj.vars.zoom)};$(elem).parents('fieldset.collapsible').children('legend').children('a').click(r)},0);map.setCenter(new google.maps.LatLng(obj.vars.latitude,obj.vars.longitude));map.setZoom(obj.vars.zoom);google.maps.event.addListener(map,"zoom_changed",function(){obj.vars.zoom=map.getZoom();obj.change("zoom",_ib.zoom)});google.maps.event.addListener(map,"center_changed",function(){var coord=map.getCenter();obj.vars.latitude=coord.lat();obj.vars.longitude=coord.lng();obj.change("move",_ib.move)});google.maps.event.addListener(map,"maptypeid_changed",function(){if(obj.ready){obj.vars.maptype=obj.getMapTypeName(map.getMapTypeId());obj.change("maptypechange",_ib.mtc)}})})});Drupal.gmap.addHandler('zoom',function(elem){var obj=this,binding=obj.bind("zoom",function(){elem.value=obj.vars.zoom});$(elem).change(function(){obj.vars.zoom=parseInt(elem.value,10);obj.change("zoom",binding)})});Drupal.gmap.addHandler('latitude',function(elem){});Drupal.gmap.addHandler('longitude',function(elem){});Drupal.gmap.addHandler('latlon',function(elem){var obj=this,binding=obj.bind("move",function(){elem.value=''+obj.vars.latitude+','+obj.vars.longitude});$(elem).change(function(){var t=this.value.split(',');obj.vars.latitude=Number(t[0]);obj.vars.longitude=Number(t[1]);obj.change("move",binding)})});Drupal.gmap.addHandler('maptype',function(elem){var obj=this,binding=obj.bind("maptypechange",function(){elem.value=obj.vars.maptype});$(elem).change(function(){obj.vars.maptype=elem.value;obj.change("maptypechange",binding)})});(function(){var re=/([0-9.]+)\s*(em|ex|px|in|cm|mm|pt|pc|%)/,normalize=function(str){var ar;if((ar=re.exec(str.toLowerCase())))return ar[1]+ar[2];return null};Drupal.gmap.addHandler('width',function(elem){var obj=this,binding=obj.bind("widthchange",function(w){elem.value=normalize(w)});$(elem).change(function(){var n;if((n=normalize(elem.value))){elem.value=n;obj.change('widthchange',binding,n)}});obj.bind('init',function(){$(elem).change()})});Drupal.gmap.addHandler('height',function(elem){var obj=this,binding=obj.bind("heightchange",function(h){elem.value=normalize(h)});$(elem).change(function(){var n;if((n=normalize(elem.value))){elem.value=n;obj.change('heightchange',binding,n)}});obj.bind('init',function(){$(elem).change()})})})();Drupal.gmap.addHandler('controltype',function(elem){var obj=this,binding=obj.bind("controltypechange",function(){elem.value=obj.vars.controltype});$(elem).change(function(){obj.vars.controltype=elem.value;obj.change("controltypechange",binding)})});Drupal.behaviors.GMap=function(context){if(Drupal.settings&&Drupal.settings['gmap_remap_widgets'])jQuery.each(Drupal.settings['gmap_remap_widgets'],function(key,val){$('#'+key).addClass('gmap-control')});$('.gmap-control:not(.gmap-processed)',context).addClass('gmap-processed').each(function(){Drupal.gmap.setup.call(this)})};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/gmap.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/marker.js. */
Drupal.gmap.addHandler('gmap',function(elem){var obj=this,infowindow=new google.maps.InfoWindow();obj.bind('init',function(){if(obj.vars.behavior.autozoom)obj.bounds=new google.maps.LatLngBounds()});obj.bind('addmarker',function(marker){marker.opts.position=new google.maps.LatLng(marker.latitude,marker.longitude);marker.opts.map=obj.map;var m=Drupal.gmap.factory.marker(marker.opts);marker.marker=m;google.maps.event.addListener(m,'click',function(){obj.change('clickmarker',-1,marker)});if(obj.vars.behavior.highlight){google.maps.event.addListener(m,'mouseover',function(){var highlightColor='#'+obj.vars.styles.highlight_color;highlightMarker(obj.map,marker,'hoverHighlight',highlightColor)});google.maps.event.addListener(m,'mouseout',function(){unHighlightMarker(obj.map,marker,'hoverHighlight')})};if(obj.vars.behavior.extramarkerevents){google.maps.event.addListener(m,'mouseover',function(){obj.change('mouseovermarker',-1,marker)});google.maps.event.addListener(m,'mouseout',function(){obj.change('mouseoutmarker',-1,marker)});google.maps.event.addListener(m,'dblclick',function(){obj.change('dblclickmarker',-1,marker)})};if(marker.autoclick||(marker.options&&marker.options.autoclick))obj.deferChange('clickmarker',-1,marker);if(obj.vars.behavior.autozoom)obj.bounds.extend(new google.maps.LatLng(marker.latitude,marker.longitude));if(marker.opts.highlight==1)highlightMarker(obj.map,marker,'viewHighlight',marker.opts.highlightcolor)});obj.bind('clickmarker',function(marker){if(infowindow!=null)infowindow.close();if(marker.text){infowindow.setContent(marker.text);infowindow.open(obj.map,marker.marker)}else if(marker.iwq||(obj.vars.iwq&&typeof marker.iwo!='undefined')){var iwq,iwo;if(obj.vars.iwq)iwq=obj.vars.iwq;if(marker.iwq)iwq=marker.iwq;iwo=0;if(marker.iwo)iwo=marker.iwo;var el=document.createElement('div');jQuery(iwq).eq(iwo).clone(false).find('*').removeAttr('id').appendTo(jQuery(el));marker.setContent(el);infowindow.open(obj.map,marker.marker)}else if(marker.rmt){obj.rmtcache=obj.rmtcache||{};if(obj.rmtcache[marker.rmt]){infowindow.setContent(data);infowindow.open(obj.map,marker.marker)}else{var uri=marker.rmt;if(obj.vars.rmtcallback)uri=obj.vars.rmtcallback+'/'+marker.rmt;$.get(uri,{},function(data){obj.rmtcache[marker.rmt]=data;marker.marker.openInfoWindowHtml(data)})}}else if(marker.tabs){var data="";for(var m in marker.tabs)data+=marker.tabs[m];infowindow.setContent(data);infowindow.open(obj.map,marker.marker)}else if(marker.link)open(marker.link,'_self')});obj.bind('markersready',function(){if(obj.vars.behavior.autozoom)if(!obj.bounds.isEmpty()){obj.map.fitBounds(obj.bounds);var listener=google.maps.event.addListener(obj.map,"idle",function(){if(obj.vars.maxzoom){var maxzoom=parseInt(obj.vars.maxzoom);if(obj.map.getZoom()>maxzoom)obj.map.setZoom(maxzoom);google.maps.event.removeListener(listener)}})}});obj.bind('clearmarkers',function(){if(obj.vars.behavior.autozoom)obj.bounds=new google.maps.LatLngBounds()});Drupal.gmap.getInfoWindow=function(){return infowindow}});;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/marker.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/highlight.js. */
highlightMarker=function(map,currentMarker,highlightID,color){var markerPoint=currentMarker.marker.getPoint(),polyPoints=Array(),mapNormalProj=G_NORMAL_MAP.getProjection(),mapZoom=map.getZoom(),clickedPixel=mapNormalProj.fromLatLngToPixel(markerPoint,mapZoom),polySmallRadius=20,polyNumSides=20,polySideLength=18;for(var a=0;a<(polyNumSides+1);a++){var aRad=polySideLength*a*(Math.PI/180),polyRadius=polySmallRadius,pixelX=clickedPixel.x+polyRadius*Math.cos(aRad),pixelY=clickedPixel.y+polyRadius*Math.sin(aRad),polyPixel=new GPoint(pixelX,pixelY),polyPoint=mapNormalProj.fromPixelToLatLng(polyPixel,mapZoom);polyPoints.push(polyPoint)};map.highlightID=new GPolygon(polyPoints,color,2,0,color,0.5);map.addOverlay(map.highlightID)};unHighlightMarker=function(map,currentMarker,highlightID){if(map.highlightID){map.removeOverlay(map.highlightID);delete map.highlightID}};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/highlight.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/gmap_marker.js. */
Drupal.gmap.factory.marker=function(opts){return new google.maps.Marker(opts)};Drupal.gmap.addHandler('gmap',function(elem){var obj=this;obj.bind('addmarker',function(marker){if(!obj.map.markers)obj.map.markers=new Array();marker.marker.setMap(obj.map);obj.map.markers.push(marker.marker)});obj.bind('delmarker',function(marker){marker.marker.setMap(null)});obj.bind('clearmarkers',function(){if(obj.map.markers)for(var i=0;i<obj.map.markers.length;i++)obj.map.markers[i].setMap(null)})});;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/gmap_marker.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/poly.js. */
Drupal.gmap.map.prototype.poly={};Drupal.gmap.map.prototype.poly.distance=function(point1,point2){return Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2))};Drupal.gmap.map.prototype.poly.computeCircle=function(obj,center,point2){var numSides=36,sideInc=10,convFactor=Math.PI/180,points=[],radius=obj.poly.distance(center,point2);for(var i=0;i<=numSides;i++){var rad=i*sideInc*convFactor,x=center.x+radius*Math.cos(rad),y=center.y+radius*Math.sin(rad);points.push(new GPoint(x,y))};return points};Drupal.gmap.map.prototype.poly.calcPolyPoints=function(center,radM,numPoints,sAngle){if(!numPoints)numPoints=32;if(!sAngle)sAngle=0;var d2r=Math.PI/180.0,r2d=180.0/Math.PI,angleRad=sAngle*d2r,latScale=radM/6378137*r2d,lngScale=latScale/Math.cos(center.latRadians()),angInc=2*Math.PI/numPoints,points=[];for(var i=0;i<numPoints;i++){var lat=parseFloat(center.lat())+latScale*Math.sin(angleRad),lng=parseFloat(center.lng())+lngScale*Math.cos(angleRad);points.push(new GLatLng(lat,lng));angleRad+=angInc};points.push(points[0]);return points};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/poly.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/icon.js. */
Drupal.gmap.getIcon=function(setname,sequence){var othimg=['printImage','mozPrintImage','printShadow','transparent'];if(!setname)return;if(!this.gicons)this.gicons={};if(!this.gshadows)this.gshadows={};if(!sequence){if(!this.sequences)this.sequences={};if(!this.sequences[setname])this.sequences[setname]=-1;this.sequences[setname]++;sequence=this.sequences[setname]};if(!this.gicons[setname]){if(!Drupal.gmap.icons[setname])alert('Request for invalid marker set '+setname+'!');this.gicons[setname]=[];this.gshadows[setname]=[];var q=Drupal.gmap.icons[setname],p,t;for(var i=0;i<q.sequence.length;i++){p=Drupal.gmap.iconpath+q.path;t=new google.maps.MarkerImage(p+q.sequence[i].f,new google.maps.Size(q.sequence[i].w,q.sequence[i].h),null,new google.maps.Point(q.anchorX,q.anchorY));if(q.shadow.f!==''){this.gshadows[setname][i]=new google.maps.MarkerImage(p+q.shadow.f,new google.maps.Size(q.shadow.w,q.shadow.h),null,new google.maps.Point(q.anchorX,q.anchorY))}else this.gshadows[setname][i]=null;for(var j=0;j<othimg.length;j++)if(q[othimg[j]]!=='')t[othimg[j]]=p+q[othimg[j]];this.gicons[setname][i]=t};delete Drupal.gmap.icons[setname]};return this.gicons[setname][sequence%this.gicons[setname].length]};Drupal.gmap.getShadow=function(setname,sequence){if(this.gshadows)return this.gshadows[setname][sequence%this.gicons[setname].length]};Drupal.gmap.iconSetup=function(){Drupal.gmap.icons={};var m=Drupal.gmap.icondata,filef,filew,fileh,files;for(var path in m)if(m.hasOwnProperty(path)){filef=m[path].f;filew=Drupal.gmap.expandArray(m[path].w,filef.length);fileh=Drupal.gmap.expandArray(m[path].h,filef.length);files=[];for(var i=0;i<filef.length;i++)files[i]={f:filef[i],w:filew[i],h:fileh[i]};for(var ini in m[path].i)if(m[path].i.hasOwnProperty(ini))$.extend(Drupal.gmap.icons,Drupal.gmap.expandIconDef(m[path].i[ini],path,files))}};Drupal.gmap.expandArray=function(arr,len){var d=arr[0];for(var i=0;i<len;i++)if(!arr[i]){arr[i]=d}else d=arr[i];return arr};Drupal.gmap.expandIconDef=function(c,path,files){var decomp=['key','name','sequence','anchorX','anchorY','infoX','infoY','shadow','printImage','mozPrintImage','printShadow','transparent'],fallback=['','',[],0,0,0,0,{f:'',h:0,w:0},'','','',''],imagerep=['shadow','printImage','mozPrintImage','printShadow','transparent'],defaults={},sets=[],i,j;for(i=0;i<decomp.length;i++){if(!c[0][i])c[0][i]=[fallback[i]];c[0][i]=Drupal.gmap.expandArray(c[0][i],c[0][0].length)};for(i=0;i<c[0][0].length;i++)for(j=0;j<decomp.length;j++)if(i===0){defaults[decomp[j]]=c[0][j][i]}else{if(!sets[i-1])sets[i-1]={};sets[i-1][decomp[j]]=c[0][j][i]};for(i=0;i<sets.length;i++)for(j=0;j<decomp.length;j++)if(sets[i][decomp[j]]===fallback[j])sets[i][decomp[j]]=defaults[decomp[j]];var icons={};for(i=0;i<sets.length;i++){var key=sets[i].key;icons[key]=sets[i];icons[key].path=path;delete icons[key].key;delete sets[i];for(j=0;j<icons[key].sequence.length;j++)icons[key].sequence[j]=files[icons[key].sequence[j]];for(j=0;j<imagerep.length;j++)if(typeof(icons[key][imagerep[j]])==='number')icons[key][imagerep[j]]=files[icons[key][imagerep[j]]]};return icons};Drupal.gmap.addHandler('gmap',function(elem){var obj=this;obj.bind('init',function(){if(!Drupal.gmap.icons)Drupal.gmap.iconSetup()});obj.bind('ready',function(){if(Drupal.gmap.icondata)obj.deferChange('iconsready',-1)});if(!obj.vars.behavior.customicons)obj.bind('preparemarker',function(marker){marker.opts.icon=Drupal.gmap.getIcon(marker.markername,marker.offset);marker.opts.shadow=Drupal.gmap.getShadow(marker.markername,marker.offset)})});;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/icon.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/markerloader_static.js. */
Drupal.gmap.addHandler('gmap',function(elem){var obj=this,marker,i;if(obj.vars.markers)obj.bind('iconsready',function(){for(i=0;i<obj.vars.markers.length;i++){marker=obj.vars.markers[i];if(!marker.opts)marker.opts={};obj.change('preparemarker',-1,marker);obj.change('addmarker',-1,marker)};obj.change('markersready',-1)})});;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/gmap/js/markerloader_static.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/all/modules/3rdparty/pathauto/pathauto.js. */
if(Drupal.jsEnabled){$(document).ready(function(){if($("#edit-pathauto-perform-alias").size()&&$("#edit-pathauto-perform-alias").attr("checked")){$("#edit-path").attr("disabled","disabled");$("#edit-path-wrapper > div.description").hide(0)};$("#edit-pathauto-perform-alias").bind("click",function(){if($("#edit-pathauto-perform-alias").attr("checked")){$("#edit-path").attr("disabled","disabled");$("#edit-path-wrapper > div[class=description]").slideUp('fast')}else{$("#edit-path").removeAttr("disabled");$("#edit-path")[0].focus();$("#edit-path-wrapper > div[class=description]").slideDown('fast')}})});Drupal.verticalTabs=Drupal.verticalTabs||{};Drupal.verticalTabs.path=function(){var path=$('#edit-path').val(),automatic=$('#edit-pathauto-perform-alias').attr('checked');if(automatic)return Drupal.t('Automatic alias');if(path){return Drupal.t('Alias: @alias',{'@alias':path})}else return Drupal.t('No alias')}};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/all/modules/3rdparty/pathauto/pathauto.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/all/modules/3rdparty/x/mollom/mollom.js. */
(function($){Drupal.behaviors.mollomTarget=function(context){$(context).find('.mollom-target').click(function(){this.target='_blank'})};Drupal.behaviors.mollomCaptcha=function(context){$('a.mollom-switch-captcha',context).click(getMollomCaptcha)}
function getMollomCaptcha(){var newCaptchaType=$(this).hasClass('mollom-audio-captcha')?'audio':'image',context=$(this).parents('form'),formBuildId=$('input[name="mollom[mollom_build_id]"]',context).val(),mollomContentId=$('input.mollom-content-id',context).val(),path='mollom/captcha/'+newCaptchaType+'/'+formBuildId;if(mollomContentId)path+='/'+mollomContentId;$.ajax({url:Drupal.settings.basePath+path,type:'POST',dataType:'json',success:function(data){if(!(data&&data.content))return;$('.mollom-captcha-content',context).parent().html(data.content);$('input[name="mollom[captchaId]"]',context).val(data.captchaId);Drupal.attachBehaviors(context);$('input[name="mollom[captcha]"]',context).focus()}});return false}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/all/modules/3rdparty/x/mollom/mollom.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/all/modules/3rdparty/ctools/js/dependent.js. */
(function($){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.dependent={};Drupal.CTools.dependent.bindings={};Drupal.CTools.dependent.activeBindings={};Drupal.CTools.dependent.activeTriggers=[];Drupal.CTools.dependent.inArray=function(array,search_term){var i=array.length;if(i>0)do{if(array[i]==search_term)return true}while(i--);return false};Drupal.CTools.dependent.autoAttach=function(){for(i in Drupal.CTools.dependent.activeTriggers)jQuery(Drupal.CTools.dependent.activeTriggers[i]).unbind('change');Drupal.CTools.dependent.activeTriggers=[];Drupal.CTools.dependent.activeBindings={};Drupal.CTools.dependent.bindings={};if(!Drupal.settings.CTools)return;for(id in Drupal.settings.CTools.dependent){Drupal.CTools.dependent.activeBindings[id]=0;for(bind_id in Drupal.settings.CTools.dependent[id].values){if(!Drupal.CTools.dependent.bindings[bind_id])Drupal.CTools.dependent.bindings[bind_id]=[];Drupal.CTools.dependent.bindings[bind_id].push(id);if(bind_id.substring(0,6)=='radio:'){var trigger_id="input[name='"+bind_id.substring(6)+"']"}else var trigger_id='#'+bind_id;Drupal.CTools.dependent.activeTriggers.push(trigger_id);var getValue=function(item,trigger){if(item.substring(0,6)=='radio:'){var val=jQuery(trigger+':checked').val()}else switch(jQuery(trigger).attr('type')){case'checkbox':var val=jQuery(trigger).attr('checked')||0;break;default:var val=jQuery(trigger).val()};return val},setChangeTrigger=function(trigger_id,bind_id){var changeTrigger=function(){var val=getValue(bind_id,trigger_id);for(i in Drupal.CTools.dependent.bindings[bind_id]){var id=Drupal.CTools.dependent.bindings[bind_id][i];if(typeof id!='string')continue;if(!Drupal.CTools.dependent.activeBindings[id])Drupal.CTools.dependent.activeBindings[id]={};if(Drupal.CTools.dependent.inArray(Drupal.settings.CTools.dependent[id].values[bind_id],val)){Drupal.CTools.dependent.activeBindings[id][bind_id]='bind'}else delete Drupal.CTools.dependent.activeBindings[id][bind_id];var len=0;for(i in Drupal.CTools.dependent.activeBindings[id])len++;var object=jQuery('#'+id+'-wrapper');if(!object.size())object=jQuery('#'+id).parent();if(Drupal.settings.CTools.dependent[id].type=='disable'){if(Drupal.settings.CTools.dependent[id].num<=len){object.attr('disabled',false);object.children().attr('disabled',false)}else{object.attr('disabled',true);object.children().attr('disabled',true)}}else if(Drupal.settings.CTools.dependent[id].num<=len){object.show(0)}else object.css('display','none')}};jQuery(trigger_id).change(function(){changeTrigger(trigger_id,bind_id)});changeTrigger(trigger_id,bind_id)};setChangeTrigger(trigger_id,bind_id)}}};Drupal.behaviors.CToolsDependent=function(context){Drupal.CTools.dependent.autoAttach();$("select.ctools-master-dependent:not(.ctools-processed)").addClass('ctools-processed').change(function(){var val=$(this).val();if(val=='all'){$('.ctools-dependent-all').show(0)}else{$('.ctools-dependent-all').hide(0);$('.ctools-dependent-'+val).show(0)}}).trigger('change')}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/all/modules/3rdparty/ctools/js/dependent.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/misc/textarea.js. */
Drupal.behaviors.textarea=function(context){$('textarea.resizable:not(.textarea-processed)',context).each(function(){if($(this).is('textarea.teaser:not(.teaser-processed)'))return false;var textarea=$(this).addClass('textarea-processed'),staticOffset=null;$(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append($('<div class="grippie"></div>').mousedown(startDrag));var grippie=$('div.grippie',$(this).parent())[0];grippie.style.marginRight=(grippie.offsetWidth-$(this)[0].offsetWidth)+'px'
function startDrag(e){staticOffset=textarea.height()-e.pageY;textarea.css('opacity',0.25);$(document).mousemove(performDrag).mouseup(endDrag);return false}
function performDrag(e){textarea.height(Math.max(32,staticOffset+e.pageY)+'px');return false}
function endDrag(e){$(document).unbind("mousemove",performDrag).unbind("mouseup",endDrag);textarea.css('opacity',1)}})};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/misc/textarea.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/misc/collapse.js. */
Drupal.toggleFieldset=function(fieldset){if($(fieldset).is('.collapsed')){var content=$('> div:not(.action)',fieldset);$(fieldset).removeClass('collapsed');content.hide();content.slideDown({duration:'fast',easing:'linear',complete:function(){Drupal.collapseScrollIntoView(this.parentNode);this.parentNode.animating=false;$('div.action',fieldset).show()},step:function(){Drupal.collapseScrollIntoView(this.parentNode)}})}else{$('div.action',fieldset).hide();var content=$('> div:not(.action)',fieldset).slideUp('fast',function(){$(this.parentNode).addClass('collapsed');this.parentNode.animating=false})}};Drupal.collapseScrollIntoView=function(node){var h=self.innerHeight||document.documentElement.clientHeight||$('body')[0].clientHeight||0,offset=self.pageYOffset||document.documentElement.scrollTop||$('body')[0].scrollTop||0,posY=$(node).offset().top,fudge=55;if(posY+node.offsetHeight+fudge>h+offset)if(node.offsetHeight>h){window.scrollTo(0,posY)}else window.scrollTo(0,posY+node.offsetHeight-h+fudge)};Drupal.behaviors.collapse=function(context){$('fieldset.collapsible > legend:not(.collapse-processed)',context).each(function(){var fieldset=$(this.parentNode);if($('input.error, textarea.error, select.error',fieldset).size()>0)fieldset.removeClass('collapsed');var text=this.innerHTML;$(this).empty().append($('<a href="#">'+text+'</a>').click(function(){var fieldset=$(this).parents('fieldset:first')[0];if(!fieldset.animating){fieldset.animating=true;Drupal.toggleFieldset(fieldset)};return false})).after($('<div class="fieldset-wrapper"></div>').append(fieldset.children(':not(legend):not(.action)'))).addClass('collapse-processed')})};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/misc/collapse.js. */
/*
 * jQuery Form Plugin
 * version: 2.25 (08-APR-2009)
 * @requires jQuery v1.2.2 or later
 * @note This has been modified for ajax.module
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}(';(5($){$.B.1s=5(u){2(!4.G){R(\'1b: 2M 9 2N - 2O 2P 1t\');6 4}2(S u==\'5\')u={T:u};3 v=4.14(\'1c\')||1d.2Q.2R;v=(v.2S(/^([^#]+)/)||[])[1];v=v||\'\';u=$.1n({1e:v,H:4.14(\'1u\')||\'1Q\'},u||{});3 w={};4.L(\'C-1R-1S\',[4,u,w]);2(w.1T){R(\'1b: 9 1U 1o C-1R-1S L\');6 4}2(u.1v&&u.1v(4,u)===I){R(\'1b: 9 1f 1o 1v 1V\');6 4}3 a=4.1w(u.2T);2(u.J){u.O=u.J;K(3 n 1x u.J){2(u.J[n]2U 15){K(3 k 1x u.J[n])a.D({7:n,8:u.J[n][k]})}E a.D({7:n,8:u.J[n]})}}2(u.1y&&u.1y(a,4,u)===I){R(\'1b: 9 1f 1o 1y 1V\');6 4}4.L(\'C-9-1W\',[a,4,u,w]);2(w.1T){R(\'1b: 9 1U 1o C-9-1W L\');6 4}3 q=$.1z(a);2(u.H.2V()==\'1Q\'){u.1e+=(u.1e.2W(\'?\')>=0?\'&\':\'?\')+q;u.J=F}E u.J=q;3 x=4,V=[];2(u.2X)V.D(5(){x.1X()});2(u.2Y)V.D(5(){x.1Y()});2(!u.16&&u.17){3 y=u.T||5(){};V.D(5(a){$(u.17).2Z(a).P(y,1Z)})}E 2(u.T)V.D(u.T);u.T=5(a,b){K(3 i=0,M=V.G;i<M;i++)V[i].30(u,[a,b,x])};3 z=$(\'W:31\',4).18();3 A=I;K(3 j=0;j<z.G;j++)2(z[j])A=Q;2(u.20||A){2(u.21)$.32(u.21,1A);E 1A()}E $.33(u);4.L(\'C-9-34\',[4,u]);6 4;5 1A(){3 h=x[0];2($(\':W[7=9]\',h).G){35(\'36: 37 22 38 39 3a 3b "9".\');6}3 i=$.1n({},$.23,u);3 s=$.1n(Q,{},$.1n(Q,{},$.23),i);3 j=\'3c\'+(1B 3d().3e());3 k=$(\'<20 3f="\'+j+\'" 7="\'+j+\'" 24="25:26" />\');3 l=k[0];k.3g({3h:\'3i\',27:\'-28\',29:\'-28\'});3 m={1f:0,19:F,1g:F,3j:0,3k:\'n/a\',3l:5(){},2a:5(){},3m:5(){},3n:5(){4.1f=1;k.14(\'24\',\'25:26\')}};3 g=i.2b;2(g&&!$.1C++)$.1h.L("3o");2(g)$.1h.L("3p",[m,i]);2(s.2c&&s.2c(m,s)===I){s.2b&&$.1C--;6}2(m.1f)6;3 o=0;3 p=0;3 q=h.U;2(q){3 n=q.7;2(n&&!q.1i){u.O=u.O||{};u.O[n]=q.8;2(q.H=="X"){u.O[7+\'.x\']=h.Y;u.O[7+\'.y\']=h.Z}}}1j(5(){3 t=x.14(\'17\'),a=x.14(\'1c\');h.1k(\'17\',j);2(h.2d(\'1u\')!=\'2e\')h.1k(\'1u\',\'2e\');2(h.2d(\'1c\')!=i.1e)h.1k(\'1c\',i.1e);2(!u.3q){x.14({3r:\'2f/C-J\',3s:\'2f/C-J\'})}2(i.1D)1j(5(){p=Q;11()},i.1D);3 b=[];2g{2(u.O)K(3 n 1x u.O)b.D($(\'<W H="3t" 7="\'+n+\'" 8="\'+u.O[n]+\'" />\').2h(h)[0]);k.2h(\'1l\');l.2i?l.2i(\'2j\',11):l.3u(\'2k\',11,I);h.9()}3v{h.1k(\'1c\',a);t?h.1k(\'17\',t):x.3w(\'17\');$(b).2l()}},10);3 r=0;5 11(){2(o++)6;l.2m?l.2m(\'2j\',11):l.3x(\'2k\',11,I);3 c=Q;2g{2(p)3y\'1D\';3 d,N;N=l.2n?l.2n.2o:l.2p?l.2p:l.2o;2((N.1l==F||N.1l.2q==\'\')&&!r){r=1;o--;1j(11,2r);6}m.19=N.1l?N.1l.2q:F;m.1g=N.2s?N.2s:N;m.2a=5(a){3 b={\'3z-H\':i.16};6 b[a]};2(i.16==\'3A\'||i.16==\'3B\'){3 f=N.1E(\'1F\')[0];m.19=f?f.8:m.19}E 2(i.16==\'2t\'&&!m.1g&&m.19!=F){m.1g=2u(m.19)}d=$.3C(m,i.16)}3D(e){c=I;$.3E(i,m,\'2v\',e)}2(c){i.T(d,\'T\');2(g)$.1h.L("3F",[m,i])}2(g)$.1h.L("3G",[m,i]);2(g&&!--$.1C)$.1h.L("3H");2(i.2w)i.2w(m,c?\'T\':\'2v\');1j(5(){k.2l();m.1g=F},2r)};5 2u(s,a){2(1d.2x){a=1B 2x(\'3I.3J\');a.3K=\'I\';a.3L(s)}E a=(1B 3M()).3N(s,\'1G/2t\');6(a&&a.2y&&a.2y.1p!=\'3O\')?a:F}}};$.B.3P=5(c){6 4.2z().2A(\'9.C-1q\',5(){$(4).1s(c);6 I}).P(5(){$(":9,W:X",4).2A(\'2B.C-1q\',5(e){3 a=4.C;a.U=4;2(4.H==\'X\'){2(e.2C!=12){a.Y=e.2C;a.Z=e.3Q}E 2(S $.B.2D==\'5\'){3 b=$(4).2D();a.Y=e.2E-b.29;a.Z=e.2F-b.27}E{a.Y=e.2E-4.3R;a.Z=e.2F-4.3S}}1j(5(){a.U=a.Y=a.Z=F},10)})})};$.B.2z=5(){4.2G(\'9.C-1q\');6 4.P(5(){$(":9,W:X",4).2G(\'2B.C-1q\')})};$.B.1w=5(b){3 a=[];2(4.G==0)6 a;3 c=4[0];3 d=b?c.1E(\'*\'):c.22;2(!d)6 a;K(3 i=0,M=d.G;i<M;i++){3 e=d[i];3 n=e.7;2(!n)1H;2(b&&c.U&&e.H=="X"){2(!e.1i&&c.U==e)a.D({7:n+\'.x\',8:c.Y},{7:n+\'.y\',8:c.Z});1H}3 v=$.18(e,Q);2(v&&v.1r==15){K(3 j=0,2H=v.G;j<2H;j++)a.D({7:n,8:v[j]})}E 2(v!==F&&S v!=\'12\')a.D({7:n,8:v})}2(!b&&c.U){3 f=c.1E("W");K(3 i=0,M=f.G;i<M;i++){3 g=f[i];3 n=g.7;2(n&&!g.1i&&g.H=="X"&&c.U==g)a.D({7:n+\'.x\',8:c.Y},{7:n+\'.y\',8:c.Z})}}6 a};$.B.3T=5(a){6 $.1z(4.1w(a))};$.B.3U=5(b){3 a=[];4.P(5(){3 n=4.7;2(!n)6;3 v=$.18(4,b);2(v&&v.1r==15){K(3 i=0,M=v.G;i<M;i++)a.D({7:n,8:v[i]})}E 2(v!==F&&S v!=\'12\')a.D({7:4.7,8:v})});6 $.1z(a)};$.B.18=5(a){K(3 b=[],i=0,M=4.G;i<M;i++){3 c=4[i];3 v=$.18(c,a);2(v===F||S v==\'12\'||(v.1r==15&&!v.G))1H;v.1r==15?$.3V(b,v):b.D(v)}6 b};$.18=5(b,c){3 n=b.7,t=b.H,1a=b.1p.1I();2(S c==\'12\')c=Q;2(c&&(!n||b.1i||t==\'1m\'||t==\'3W\'||(t==\'1J\'||t==\'1K\')&&!b.1L||(t==\'9\'||t==\'X\')&&b.C&&b.C.U!=b||1a==\'13\'&&b.1M==-1))6 F;2(1a==\'13\'){3 d=b.1M;2(d<0)6 F;3 a=[],1N=b.3X;3 e=(t==\'13-2I\');3 f=(e?d+1:1N.G);K(3 i=(e?d:0);i<f;i++){3 g=1N[i];2(g.1t){3 v=g.8;2(!v)v=(g.1O&&g.1O[\'8\']&&!(g.1O[\'8\'].3Y))?g.1G:g.8;2(e)6 v;a.D(v)}}6 a}6 b.8};$.B.1Y=5(){6 4.P(5(){$(\'W,13,1F\',4).2J()})};$.B.2J=$.B.3Z=5(){6 4.P(5(){3 t=4.H,1a=4.1p.1I();2(t==\'1G\'||t==\'40\'||1a==\'1F\')4.8=\'\';E 2(t==\'1J\'||t==\'1K\')4.1L=I;E 2(1a==\'13\')4.1M=-1})};$.B.1X=5(){6 4.P(5(){2(S 4.1m==\'5\'||(S 4.1m==\'41\'&&!4.1m.42))4.1m()})};$.B.43=5(b){2(b==12)b=Q;6 4.P(5(){4.1i=!b})};$.B.2K=5(b){2(b==12)b=Q;6 4.P(5(){3 t=4.H;2(t==\'1J\'||t==\'1K\')4.1L=b;E 2(4.1p.1I()==\'2L\'){3 a=$(4).44(\'13\');2(b&&a[0]&&a[0].H==\'13-2I\'){a.45(\'2L\').2K(I)}4.1t=b}})};5 R(){2($.B.1s.46&&1d.1P&&1d.1P.R)1d.1P.R(\'[47.C] \'+15.48.49.4a(1Z,\'\'))}})(4b);',62,260,'||if|var|this|function|return|name|value|submit||||||||||||||||||||||||||||fn|form|push|else|null|length|type|false|data|for|trigger|max|doc|extraData|each|true|log|typeof|success|clk|callbacks|input|image|clk_x|clk_y||cb|undefined|select|attr|Array|dataType|target|a_fieldValue|responseText|tag|ajaxSubmit|action|window|url|aborted|responseXML|event|disabled|setTimeout|setAttribute|body|reset|extend|via|tagName|plugin|constructor|a_ajaxSubmit|selected|method|beforeSerialize|a_formToArray|in|beforeSubmit|param|fileUpload|new|active|timeout|getElementsByTagName|textarea|text|continue|toLowerCase|checkbox|radio|checked|selectedIndex|ops|attributes|console|GET|pre|serialize|veto|vetoed|callback|validate|a_resetForm|a_clearForm|arguments|iframe|closeKeepAlive|elements|ajaxSettings|src|about|blank|top|1000px|left|getResponseHeader|global|beforeSend|getAttribute|POST|multipart|try|appendTo|attachEvent|onload|load|remove|detachEvent|contentWindow|document|contentDocument|innerHTML|100|XMLDocument|xml|toXml|error|complete|ActiveXObject|documentElement|a_ajaxFormUnbind|bind|click|offsetX|offset|pageX|pageY|unbind|jmax|one|a_clearFields|a_selected|option|skipping|process|no|element|location|href|match|semantic|instanceof|toUpperCase|indexOf|resetForm|clearForm|html|apply|file|get|ajax|notify|alert|Error|Form|must|not|be|named|jqFormIO|Date|getTime|id|css|position|absolute|status|statusText|getAllResponseHeaders|setRequestHeader|abort|ajaxStart|ajaxSend|skipEncodingOverride|encoding|enctype|hidden|addEventListener|finally|removeAttr|removeEventListener|throw|content|json|script|httpData|catch|handleError|ajaxSuccess|ajaxComplete|ajaxStop|Microsoft|XMLDOM|async|loadXML|DOMParser|parseFromString|parsererror|a_ajaxForm|offsetY|offsetLeft|offsetTop|a_formSerialize|a_fieldSerialize|merge|button|options|specified|a_clearInputs|password|object|nodeType|a_enable|parent|find|debug|jquery|prototype|join|call|jQuery'.split('|'),0,{}));
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/ajax/ajax.js. */
Drupal.Ajax=new Object();Drupal.Ajax.plugins={};Drupal.Ajax.firstRun=false;Drupal.Ajax.init=function(context){var f,s;if(f=$('.ajax-form',context)){if(!Drupal.Ajax.firstRun){Drupal.Ajax.invoke('init');Drupal.Ajax.firstRun=true};s=$('input[type="image"],input[type="submit"]',f);s.click(function(){this.form.ajax_activator=$(this);return true});f.each(function(){this.ajax_activator=null;$(this).submit(function(){if(this.ajax_activator===null)this.ajax_activator=$('#edit-submit',this);if(this.ajax_activator.hasClass('ajax-trigger')){Drupal.Ajax.go($(this),this.ajax_activator);return false}else return true});return true})};return true};Drupal.Ajax.invoke=function(hook,args){var plugin,r,ret;ret=true;for(plugin in Drupal.Ajax.plugins){r=Drupal.Ajax.plugins[plugin](hook,args);if(r===false)ret=false};return ret};Drupal.Ajax.go=function(formObj,submitter){var submitterVal,submitterName,extraData;Drupal.Ajax.invoke('submit',{submitter:submitter});submitterVal=submitter.val();submitterName=submitter.attr('name');submitter.val(Drupal.t('Loading...'));extraData={};extraData[submitterName]=submitterVal;extraData.drupal_ajax='1';formObj.a_ajaxSubmit({extraData:extraData,beforeSubmit:function(data){data[data.length]={name:submitterName,value:submitterVal};data[data.length]={name:'drupal_ajax',value:'1'};submitter.attr('disabled','disabled');return true},dataType:'json',error:function(XMLHttpRequest,textStatus,errorThrown){window.alert(Drupal.t('ajax.module: An unknown error has occurred.'));if(window.console)console.log('error',arguments);return true},success:function(data){submitter.val(submitterVal);Drupal.Ajax.response(submitter,formObj,data);submitter.removeAttr('disabled');return true}});return false};Drupal.Ajax.message=function(formObj,submitter,data,options){var args;data.local={submitter:submitter,form:formObj};if(Drupal.Ajax.invoke('message',data)){Drupal.Ajax.writeMessage(data.local.form,data.local.submitter,options);Drupal.Ajax.invoke('afterMessage',data)};return true};Drupal.Ajax.writeMessage=function(formObj,submitter,options){var i,_i,thisItem,log,errBox,h,data;if(options.action==='notify'){$('.messages, .ajax-preview',formObj).remove();$('input, textarea').removeClass('error status warning required');if(options.type==='preview'){log=$('<div>').addClass('ajax-preview');log.html(options.messages);formObj.prepend(log)}else{log=$('<ul>');errBox=$(".messages."+options.type,formObj[0]);for(i=0,_i=options.messages.length;i<_i;i++){thisItem=$('#'+options.messages[i].id,formObj[0]);thisItem.addClass(options.type);if(options.messages[i].required)thisItem.addClass('required');log.append('<li>'+options.messages[i].value+'</li>')};if(errBox.length===0){errBox=$("<div class='messages "+options.type+"'>");formObj.prepend(errBox)};errBox.html(log)}}else if(options.action==='clear')$('.messages, .ajax-preview',formObj).remove();return true};Drupal.Ajax.updater=function(updaters){var i,_i,elm;for(i=0,_i=updaters.length;i<_i;i++){elm=$(updaters[i].selector);if(updaters[i].type==='html_in'){elm.html(updaters[i].value)}else if(updaters[i].type==='html_out'){elm.replaceWith(updaters[i].value)}else if(updaters[i].type==='field'){elm.val(updaters[i].value)}else if(updaters[i].type==='remove'){elm.remove()}else if(updaters[i].type==='hide')elm.hide()};return true};Drupal.Ajax.response=function(submitter,formObj,data){var newSubmitter;data.local={submitter:submitter,form:formObj};if(data.status===false){Drupal.Ajax.updater(data.updaters);Drupal.Ajax.message(formObj,submitter,data,{action:'notify',messages:data.messages_error,type:'error'})}else if(data.preview!==null){Drupal.Ajax.updater(data.updaters);Drupal.Ajax.message(formObj,submitter,data,{action:'notify',messages:decodeURIComponent(data.preview),type:'preview'})}else if(data.redirect===null){if(data.messages_status.length>0)Drupal.Ajax.message(formObj,submitter,data,{action:'notify',messages:data.messages_status,type:'status'});if(data.messages_warning.length>0)Drupal.Ajax.message(formObj,submitter,data,{action:'notify',messages:data.messages_warning,type:'warning'});if(data.messages_status.length===0&&data.messages_warning.length===0)Drupal.Ajax.message(formObj,submitter,data,{action:'clear'})}else if(Drupal.Ajax.invoke('redirect',data)){Drupal.Ajax.redirect(data.redirect)}else{Drupal.Ajax.updater(data.updaters);if(data.messages_status.length===0&&data.messages_warning.length===0){Drupal.Ajax.message(formObj,submitter,data,{action:'clear'})}else Drupal.Ajax.message(formObj,submitter,data,{action:'notify',messages:data.messages_status,type:'status'})};return true};Drupal.Ajax.redirect=function(url){window.location.href=url};Drupal.behaviors.Ajax=Drupal.Ajax.init;;
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/ajax/ajax.js. */
/* Source and licensing information for the line(s) below can be found at http://www.saigonist.com/sites/saigonist.com/modules/jquery_update/replace/teaser.js. */
Drupal.behaviors.teaser=function(context){$('textarea.teaser:not(.teaser-processed)',context).each(function(){var teaser=$(this).addClass('teaser-processed'),body=$('#'+Drupal.settings.teaser[this.id]),checkbox=$('#'+Drupal.settings.teaserCheckbox[this.id]).parent(),checked=$(checkbox).children('input').attr('checked')?true:false,parent=teaser[0].parentNode;$(body).before(teaser);$(parent).remove()
function trim(text){return text.replace(/^\s+/g,'').replace(/\s+$/g,'')}
function join_teaser(){if(teaser.val())body.val(trim(teaser.val())+'\r\n\r\n'+trim(body.val()));teaser[0].value='';$(teaser).attr('disabled','disabled');$(teaser).parent().slideUp('fast');$(this).val(Drupal.t('Split summary at cursor'));$(checkbox).hide();checked=$(checkbox).children('input').attr('checked')?true:false;$(checkbox).children('input').attr('checked',true)}
function split_teaser(){body[0].focus();var selection=Drupal.getSelection(body[0]),split=selection.start,text=body.val();teaser[0].value=trim(text.slice(0,split));body[0].value=trim(text.slice(split));$(teaser).attr('disabled','');$(teaser).parent().slideDown('fast');$(this).val(Drupal.t('Join summary'));$(checkbox).show().children('input').attr('checked',checked)};var button=$('<div class="teaser-button-wrapper"><input type="button" class="teaser-button" /></div>'),include=$('#'+this.id.substring(0,this.id.length-2)+'include');$(include).parent().parent().before(button);var text=body.val().split('<!--break-->',2);if(text.length==2){teaser[0].value=trim(text[0]);body[0].value=trim(text[1]);$(teaser).attr('disabled','');$('input',button).val(Drupal.t('Join summary')).toggle(join_teaser,split_teaser)}else{$('input',button).val(Drupal.t('Split summary at cursor')).toggle(split_teaser,join_teaser);$(checkbox).hide().children('input').attr('checked',true)};if(Drupal.behaviors.textarea&&teaser.is('.form-textarea:not(.textarea-processed)'))Drupal.behaviors.textarea(teaser.parentNode);if(teaser[0].disabled)teaser.parent().hide()})};
/* Source and licensing information for the above line(s) can be found at http://www.saigonist.com/sites/saigonist.com/modules/jquery_update/replace/teaser.js. */
/*!
* jQuery Form Plugin
* version: 2.43 (12-MAR-2010)
* @requires jQuery v1.3.2 or later
*
* Examples and documentation at: http://malsup.com/jquery/form/
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*/
(function(b){function o(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(a);else window.opera&&window.opera.postError&&window.opera.postError(a)}}b.fn.ajaxSubmit=function(a){function d(){function r(){var p=h.attr("target"),n=h.attr("action");j.setAttribute("target",z);j.getAttribute("method")!="POST"&&j.setAttribute("method","POST");j.getAttribute("action")!=g.url&&j.setAttribute("action",g.url);g.skipEncodingOverride||
h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});g.timeout&&setTimeout(function(){C=true;s()},g.timeout);var m=[];try{if(g.extraData)for(var u in g.extraData)m.push(b('<input type="hidden" name="'+u+'" value="'+g.extraData[u]+'" />').appendTo(j)[0]);t.appendTo("body");t.data("form-plugin-onload",s);j.submit()}finally{j.setAttribute("action",n);p?j.setAttribute("target",p):h.removeAttr("target");b(m).remove()}}function s(){if(!D){var p=true;try{if(C)throw"timeout";var n,m;m=v.contentWindow?
v.contentWindow.document:v.contentDocument?v.contentDocument:v.document;var u=g.dataType=="xml"||m.XMLDocument||b.isXMLDoc(m);o("isXml="+u);if(!u&&(m.body==null||m.body.innerHTML=="")){if(--G){o("requeing onLoad callback, DOM not available");setTimeout(s,250);return}o("Could not access iframe DOM after 100 tries.");return}o("response detected");D=true;i.responseText=m.body?m.body.innerHTML:null;i.responseXML=m.XMLDocument?m.XMLDocument:m;i.getResponseHeader=function(H){return{"content-type":g.dataType}[H]};
if(g.dataType=="json"||g.dataType=="script"){var E=m.getElementsByTagName("textarea")[0];if(E)i.responseText=E.value;else{var F=m.getElementsByTagName("pre")[0];if(F)i.responseText=F.innerHTML}}else if(g.dataType=="xml"&&!i.responseXML&&i.responseText!=null)i.responseXML=A(i.responseText);n=b.httpData(i,g.dataType)}catch(B){o("error caught:",B);p=false;i.error=B;b.handleError(g,i,"error",B)}if(p){g.success(n,"success");w&&b.event.trigger("ajaxSuccess",[i,g])}w&&b.event.trigger("ajaxComplete",[i,g]);
w&&!--b.active&&b.event.trigger("ajaxStop");if(g.complete)g.complete(i,p?"success":"error");setTimeout(function(){t.removeData("form-plugin-onload");t.remove();i.responseXML=null},100)}}function A(p,n){if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(p)}else n=(new DOMParser).parseFromString(p,"text/xml");return n&&n.documentElement&&n.documentElement.tagName!="parsererror"?n:null}var j=h[0];if(b(":input[name=submit]",j).length)alert('Error: Form elements must not be named "submit".');
else{var g=b.extend({},b.ajaxSettings,a),q=b.extend(true,{},b.extend(true,{},b.ajaxSettings),g),z="jqFormIO"+(new Date).getTime(),t=b('<iframe id="'+z+'" name="'+z+'" src="'+g.iframeSrc+'" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />'),v=t[0];t.css({position:"absolute",top:"-1000px",left:"-1000px"});var i={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=
1;t.attr("src",g.iframeSrc)}},w=g.global;w&&!b.active++&&b.event.trigger("ajaxStart");w&&b.event.trigger("ajaxSend",[i,g]);if(q.beforeSend&&q.beforeSend(i,q)===false)q.global&&b.active--;else if(!i.aborted){var D=false,C=0;if(q=j.clk){var y=q.name;if(y&&!q.disabled){g.extraData=g.extraData||{};g.extraData[y]=q.value;if(q.type=="image"){g.extraData[y+".x"]=j.clk_x;g.extraData[y+".y"]=j.clk_y}}}g.forceSync?r():setTimeout(r,10);var G=100}}}if(!this.length){o("ajaxSubmit: skipping submit process - no element selected");
return this}if(typeof a=="function")a={success:a};var e=b.trim(this.attr("action"));if(e)e=(e.match(/^([^#]+)/)||[])[1];e=e||window.location.href||"";a=b.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a||{});e={};this.trigger("form-pre-serialize",[this,a,e]);if(e.veto){o("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(a.beforeSerialize&&a.beforeSerialize(this,a)===false){o("ajaxSubmit: submit aborted via beforeSerialize callback");
return this}var f=this.formToArray(a.semantic);if(a.data){a.extraData=a.data;for(var c in a.data)if(a.data[c]instanceof Array)for(var l in a.data[c])f.push({name:c,value:a.data[c][l]});else f.push({name:c,value:a.data[c]})}if(a.beforeSubmit&&a.beforeSubmit(f,this,a)===false){o("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[f,this,a,e]);if(e.veto){o("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}c=b.param(f);if(a.type.toUpperCase()==
"GET"){a.url+=(a.url.indexOf("?")>=0?"&":"?")+c;a.data=null}else a.data=c;var h=this,k=[];a.resetForm&&k.push(function(){h.resetForm()});a.clearForm&&k.push(function(){h.clearForm()});if(!a.dataType&&a.target){var x=a.success||function(){};k.push(function(r){var s=a.replaceTarget?"replaceWith":"html";b(a.target)[s](r).each(x,arguments)})}else a.success&&k.push(a.success);a.success=function(r,s,A){for(var j=0,g=k.length;j<g;j++)k[j].apply(a,[r,s,A||h,h])};c=b("input:file",this).fieldValue();l=false;
for(e=0;e<c.length;e++)if(c[e])l=true;if(c.length&&a.iframe!==false||a.iframe||l||0)a.closeKeepAlive?b.get(a.closeKeepAlive,d):d();else b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.preventDefault();b(this).ajaxSubmit(a)}).bind("click.form-plugin",function(d){var e=d.target,f=b(e);if(!f.is(":submit,input:image")){e=f.closest(":submit");if(e.length==0)return;e=e[0]}var c=this;c.clk=e;
if(e.type=="image")if(d.offsetX!=undefined){c.clk_x=d.offsetX;c.clk_y=d.offsetY}else if(typeof b.fn.offset=="function"){f=f.offset();c.clk_x=d.pageX-f.left;c.clk_y=d.pageY-f.top}else{c.clk_x=d.pageX-e.offsetLeft;c.clk_y=d.pageY-e.offsetTop}setTimeout(function(){c.clk=c.clk_x=c.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a){var d=[];if(this.length==0)return d;var e=this[0],f=a?e.getElementsByTagName("*"):e.elements;
if(!f)return d;for(var c=0,l=f.length;c<l;c++){var h=f[c],k=h.name;if(k)if(a&&e.clk&&h.type=="image"){if(!h.disabled&&e.clk==h){d.push({name:k,value:b(h).val()});d.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y})}}else if((h=b.fieldValue(h,true))&&h.constructor==Array)for(var x=0,r=h.length;x<r;x++)d.push({name:k,value:h[x]});else h!==null&&typeof h!="undefined"&&d.push({name:k,value:h})}if(!a&&e.clk){a=b(e.clk);f=a[0];if((k=f.name)&&!f.disabled&&f.type=="image"){d.push({name:k,value:a.val()});
d.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y})}}return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var d=[];this.each(function(){var e=this.name;if(e){var f=b.fieldValue(this,a);if(f&&f.constructor==Array)for(var c=0,l=f.length;c<l;c++)d.push({name:e,value:f[c]});else f!==null&&typeof f!="undefined"&&d.push({name:this.name,value:f})}});return b.param(d)};b.fn.fieldValue=function(a){for(var d=[],e=0,f=this.length;e<f;e++){var c=
b.fieldValue(this[e],a);c===null||typeof c=="undefined"||c.constructor==Array&&!c.length||(c.constructor==Array?b.merge(d,c):d.push(c))}return d};b.fieldValue=function(a,d){var e=a.name,f=a.type,c=a.tagName.toLowerCase();if(typeof d=="undefined")d=true;if(d&&(!e||a.disabled||f=="reset"||f=="button"||(f=="checkbox"||f=="radio")&&!a.checked||(f=="submit"||f=="image")&&a.form&&a.form.clk!=a||c=="select"&&a.selectedIndex==-1))return null;if(c=="select"){c=a.selectedIndex;if(c<0)return null;d=[];a=a.options;
e=(f=f=="select-one")?c+1:a.length;for(c=f?c:0;c<e;c++){var l=a[c];if(l.selected){var h=l.value;h||(h=l.attributes&&l.attributes.value&&!l.attributes.value.specified?l.text:l.value);if(f)return h;d.push(h)}}return d}return a.value};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var a=this.type,d=this.tagName.toLowerCase();if(a=="text"||a=="password"||d=="textarea")this.value=
"";else if(a=="checkbox"||a=="radio")this.checked=false;else if(d=="select")this.selectedIndex=-1})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};b.fn.enable=function(a){if(a==undefined)a=true;return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){if(a==undefined)a=true;return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio")this.checked=a;else if(this.tagName.toLowerCase()==
"option"){d=b(this).parent("select");a&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(false);this.selected=a}})}})(jQuery);
;
